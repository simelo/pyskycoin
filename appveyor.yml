image: Visual Studio 2017

environment:
    global:
        CYG_ROOT: C:\cygwin64
        CYG_MIRROR: http://cygwin.mirror.constant.com
        CYG_CACHE: C:\cygwin64\var\cache\setup
        CYG_BASH: C:\cygwin64\bin\bash

    matrix:
        - PYTHON: "C:\\Python27"
        - PYTHON: "C:\\Python33"
        - PYTHON: "C:\\Python34"
        - PYTHON: "C:\\Python35"
        - PYTHON: "C:\\Python27-x64"
        - PYTHON: "C:\\Python33-x64"
          DISTUTILS_USE_SDK: "1"
        - PYTHON: "C:\\Python34-x64"
          DISTUTILS_USE_SDK: "1"
        - PYTHON: "C:\\Python35-x64"
        - PYTHON: "C:\\Python36-x64"
cache:
    - '%CYG_CACHE%'

install:
    - '%CYG_ROOT%\setup-x86_64.exe --quiet-mode --no-shortcuts --upgrade-also --packages autoconf,autogen,automake,cygwin-devel,git,gcc-core,gcc-g++,libncurses-devel,libprotobuf-devel,make,openssh,openssl-devel,perl,perl_pods,pkg-config,tmux,zlib-devel'
    - '%CYG_ROOT%\bin\cygcheck -dc cygwin'
    - git submodule init
    - git submodule update
    - cd gopath/src/github.com/skycoin/skycoin
    - git checkout origin/stdevEclipse_t1568_swig_files
    - cd C:\projects\pyskycoin
    - "%PYTHON%\\python.exe -m pip install wheel tox"
    - cinst make
    - cinst swig

build: off

test_script:
    - '%CYG_BASH% -lc "cd $APPVEYOR_BUILD_FOLDER && make test"'
